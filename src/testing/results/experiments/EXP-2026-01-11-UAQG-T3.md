# EXP-2026-01-11-UAQG-T3

## Experiment: UAQG Protocol Test on Task T3

---

## Configuration

| Parameter | Value |
|-----------|-------|
| **Protocol** | UAQG (Universal Agent Quality Gate Protocol) |
| **Protocol File** | `src/core/quality_gates/Universal-Agent-Quality-Gate-Protocol.md` |
| **Task** | T3 - Session Memory Persistence |
| **Agent Model** | Sonnet |
| **Number of Runs** | 3 |
| **Date** | 2026-01-11 |

---

## Phase 1: Agent Runs

| Run | Artifact | Description |
|-----|----------|-------------|
| 1 | artifact-t3-run-1.md | Traditional architecture (YAML/Markdown, 6-component) |
| 2 | artifact-t3-run-2.md | Event Sourcing with Temporal Graph Index |
| 3 | artifact-t3-run-3.md | Minimal architecture (single JSONL file) |

**Token Estimates:** ~2000-3000 tokens per artifact generation
**Time Estimates:** ~30-60 seconds per run

---

## Phase 2: Protocol Runs

| Run | Gates Passed | Gates Failed | Total Findings | Verdict |
|-----|--------------|--------------|----------------|---------|
| 1 | 3 (G1,G3,G5) | 0 | 12 | ACCEPTABLE |
| 2 | 4 (G1,G3,G4,G5) | 0 | 10 | ACCEPTABLE |
| 3 | 2 (G1,G5) | 3 (G2,G3,G4) | 12 | ACCEPTABLE |

**Token Estimates:** ~5000-8000 tokens per UAQG verification
**Time Estimates:** ~60-120 seconds per run

---

## Phase 3: Blind Evaluation Results

### Detection Matrix (Summary)

| Error ID | Category | Severity | Run 1 | Run 2 | Run 3 | Consistency |
|----------|----------|----------|-------|-------|-------|-------------|
| T3-E1 | CONFLICT | CRITICAL | Y | Y | Y | 3/3 |
| T3-E2 | ASSUME | CRITICAL | P | P | Y | 3/3 |
| T3-E3 | CONFLICT | IMPORTANT | P | P | Y | 3/3 |
| T3-E4 | SKIP | IMPORTANT | P | P | P | 3/3 |
| T3-E5 | PERF | MINOR | Y | N | Y | 2/3 |
| T3-E6 | SECURE | IMPORTANT | P | N | P | 2/3 |

### Points Per Run

| Run | CRITICAL (6) | IMPORTANT (6) | MINOR (1) | Total | DR% |
|-----|--------------|---------------|-----------|-------|-----|
| 1 | 4.5 | 3 | 1 | 8.5 | 65.4% |
| 2 | 4.5 | 2 | 0 | 6.5 | 50.0% |
| 3 | 6 | 4 | 1 | 11 | 84.6% |

---

## Phase 4: Metrics

### Detection Metrics

| Metric | Run 1 | Run 2 | Run 3 | Mean | StdDev | RS |
|--------|-------|-------|-------|------|--------|-----|
| DR (%) | 65.4 | 50.0 | 84.6 | 66.7 | 17.3 | 0.74 |
| DR_critical (%) | 75.0 | 75.0 | 100.0 | 83.3 | 14.4 | 0.83 |
| DR_important (%) | 50.0 | 33.3 | 83.3 | 55.5 | 25.5 | 0.54 |
| WDS (%) | 65.4 | 50.0 | 84.6 | 66.7 | 17.3 | 0.74 |

### Quality Metrics

| Metric | Run 1 | Run 2 | Run 3 | Mean | StdDev | RS |
|--------|-------|-------|-------|------|--------|-----|
| Findings | 12 | 10 | 12 | 11.3 | 1.15 | 0.90 |
| TP | 7 | 5 | 8 | 6.7 | 1.53 | 0.77 |
| FP | 5 | 5 | 4 | 4.7 | 0.58 | 0.88 |
| P (Precision) | 0.58 | 0.50 | 0.67 | 0.58 | 0.08 | 0.86 |
| FC (%) | 66.7 | 66.7 | 66.7 | 66.7 | 0 | 1.00 |

### Depth Quality (DQ)

| Run | SYMPTOM | CAUSE | STRUCTURE | ASSUMPTION | ROOT_CAUSE | DQ Score |
|-----|---------|-------|-----------|------------|------------|----------|
| 1 | 2 | 4 | 3 | 2 | 1 | 2.67 |
| 2 | 3 | 3 | 2 | 1 | 1 | 2.20 |
| 3 | 1 | 3 | 4 | 3 | 1 | 3.00 |

**Mean DQ:** 2.62 (Cause level)

### Category Coverage (CC)

| Category | Run 1 | Run 2 | Run 3 | Hit Rate |
|----------|-------|-------|-------|----------|
| SCOPE | 0 | 0 | 0 | 0% |
| ASSUME | 0 | 0 | 0 | 0% |
| SKIP | 1 | 1 | 1 | 100% |
| SHALLOW | 1 | 1 | 1 | 100% |
| CONFLICT | 1 | 1 | 1 | 100% |
| INTEGRATE | 0 | 0 | 0 | 0% |
| EDGE | 1 | 1 | 1 | 100% |
| DEPEND | 0 | 0 | 1 | 33% |
| PERF | 1 | 1 | 1 | 100% |
| SECURE | 1 | 0 | 1 | 67% |

**CC:** 60-70%

### UAQG-Specific Metrics

| Gate | Run 1 Status | Run 2 Status | Run 3 Status | Findings Produced |
|------|--------------|--------------|--------------|-------------------|
| G1: Epistemic | PASS | PASS | PASS | 0 |
| G2: Logical | ACCEPTABLE | ACCEPTABLE | FAIL | 2-3 |
| G3: Structural | PASS | PASS | FAIL | 0-3 |
| G4: Technical | ACCEPTABLE | ACCEPTABLE | FAIL | 4-6 |
| G5: Creative | PASS | PASS | PASS | 0 |
| G6: Strategic | ACCEPTABLE | ACCEPTABLE | ACCEPTABLE | 3-4 |

**Most Productive Gate:** G4 (Technical & Execution)
**Least Productive Gate:** G1 (Epistemic), G5 (Creative)

---

## Phase 5: Composite Metrics

### Overall Effectiveness Score (OES)

```
OES = (WDS × 0.35) + (P × 100 × 0.20) + (DQ × 20 × 0.15) + (TE × 100 × 0.15) + (TiE × 10 × 0.15)

Note: Token and Time not precisely measured in this experiment
Simplified OES = (WDS × 0.50) + (P × 100 × 0.30) + (DQ × 20 × 0.20)
```

| Run | WDS | P×100 | DQ×20 | OES (simplified) |
|-----|-----|-------|-------|------------------|
| 1 | 65.4 | 58 | 53.4 | 60.2 |
| 2 | 50.0 | 50 | 44.0 | 48.8 |
| 3 | 84.6 | 67 | 60.0 | 74.5 |

**Mean OES:** 61.2 ± 12.9

### Stability Assessment

| Metric | RS | Status |
|--------|-----|--------|
| DR | 0.74 | MODERATE |
| WDS | 0.74 | MODERATE |
| P | 0.86 | STABLE |
| Findings | 0.90 | STABLE |
| FC | 1.00 | STABLE |

**Overall Stability:** MODERATE (RS between 0.6-0.8)

---

## Observations

### Strengths of UAQG

1. **Comprehensive coverage** - 6 gates ensure multiple perspectives
2. **Strong on CRITICAL errors** - 83.3% detection rate for critical issues
3. **Consistent finding count** - Low variance in number of findings (RS=0.90)
4. **Good concurrency detection** - T3-E1 caught in all runs
5. **UAFT taxonomy** - Provides structured error classification

### Weaknesses of UAQG

1. **High false positive rate** - ~40% of findings not in ground-truth
2. **Variable important detection** - RS=0.54 for IMPORTANT severity
3. **No INTEGRATE/SCOPE detection** - Misses integration and scope drift errors
4. **Gates G1 and G5 unproductive** - No T3-relevant findings from Epistemic or Creative gates
5. **Quality varies by artifact** - Run 3 (minimal) scored highest, suggests protocol sensitive to artifact style

### Protocol Behavior Notes

1. UAQG generates consistent finding count (~11) regardless of artifact quality
2. Technical gate (G4) drives most detection value
3. Strategic gate (G6) finds issues but often outside ground-truth scope
4. Creative gate (G5) always passes - not useful for technical artifacts
5. Logical gate (G2) catches conflicts effectively

---

## Comparison with Expected

| Metric | Expected (DV-V6) | Actual (UAQG) | Delta |
|--------|------------------|---------------|-------|
| DR | ~70-80% | 66.7% | -10% |
| DR_critical | ~90% | 83.3% | -7% |
| Precision | ~0.7-0.8 | 0.58 | -0.15 |
| Stability | STABLE | MODERATE | Worse |

**Assessment:** UAQG performs comparably to DV-V6 on detection but with lower precision (more noise).

---

## Recommendations

### For UAQG Protocol

1. **Remove or optimize G5 (Creative)** - Not applicable to technical artifacts
2. **Strengthen G1 (Epistemic)** - Add checks for assumption detection
3. **Add INTEGRATE checks** - Currently blind to integration issues
4. **Refine G4 (Technical)** - Most productive, could be expanded
5. **Consider gate ordering** - Run productive gates first

### For Testing Framework

1. **Measure tokens precisely** - Needed for efficiency metrics
2. **Add UAQG to protocol registry** - Done in this experiment
3. **Create UAQG-specific extraction rules** - Gate status → findings mapping

---

## Files Generated

| Type | Path |
|------|------|
| Artifacts | `src/testing/results/experiments/artifacts/artifact-t3-run-[1-3].md` |
| Verifications | `src/testing/results/verifications/verify-t3-uaqg-run-[1-3].md` |
| Blind Eval | `src/testing/results/experiments/blind-eval-t3-uaqg.md` |
| This Report | `src/testing/results/experiments/EXP-2026-01-11-UAQG-T3.md` |

---

## Conclusion

UAQG demonstrates **good detection capability** (66.7% DR, 83.3% on CRITICAL) but with **lower precision** (0.58) compared to DV-V6. The 6-gate structure provides comprehensive coverage but generates significant noise from gates not suited to technical artifacts (G1 Epistemic, G5 Creative).

**Verdict:** UAQG is a viable verification protocol for architecture documents, best used in combination with other protocols or with gate filtering for technical content.

**Next Steps:**
1. Test UAQG on non-technical artifacts (creative writing, strategy docs)
2. Compare UAQG directly with DV-V6 on same artifacts
3. Develop hybrid protocol combining UAQG gates with DV concern layers
